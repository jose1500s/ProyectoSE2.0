import{A as _,s as k,a as S,b as j}from"./AppLayout-d1333a90.js";import M from"./GraficaIngreso-688c277d.js";import{s as T,a as U,b as N,c as B}from"./datatable.esm-789c8773.js";import{s as E,a as G,b as L,c as A}from"./toolbar.esm-92c3a35d.js";import{a as F}from"./button.esm-256f0b79.js";import{a6 as h,f as v,b as t,w as n,a as r,F as z,y as d,o as y,m as I,j as R,t as Y,h as q}from"./app-1b8d8cba.js";import{s as H}from"./chart.esm-58fe6bc4.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const K={components:{AppLayout:_,DataTable:T,Column:E,InputText:U,Row:G,Button:F,MultiSelect:L,Chart:H,Dialog:k,GraficaIngreso:M,Toast:S,ConfirmDialog:j,Toolbar:A,Dropdown:N,InputNumber:B},props:{reingresos:Array},setup(){},methods:{filtrarCarreras(){return["Negocios","Administración","Sistemas","Automotriz","Mecatrónica","Manufactura","Telemática"]},filtrarProcesos(){return["1er Proceso","2do Proceso","3er Proceso"]},filtrarFecha(){return["SEP-DIC"]},exportCSV(){this.$refs.dt.exportCSV()},limpiarFiltros(){this.filters.carrera.value=null,this.filters.Proceso.value=null,this.filters.fecha.value=null,this.$refs.dt.filter(this.filters,"carrera"),this.$refs.dt.filter(this.filters,"Proceso"),this.$refs.dt.filter(this.filters,"fecha")},openResponsive(){this.displayResponsive=!0},closeResponsive(){this.displayResponsive=!1},saveImage(){const m=document.getElementById("contenedorGrafica").getElementsByTagName("canvas")[0].toDataURL("image/png"),f=document.createElement("a");f.download="GraficaIngreso.png",f.href=m,f.click()},confirm1(){this.$confirm.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.$toast.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{this.$toast.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},openNew(){this.product={},this.submitted=!1,this.productDialog=!0},confirmDeleteSelected(){this.deleteProductsDialog=!0},hideDialog(){this.productDialog=!1,this.submitted=!1},editProduct(i){this.product={...i},this.editDialog=!0},confirmDeleteProduct(i){this.product=i,this.deleteProductDialog=!0},saveProduct(){this.submitted=!0,this.$toast.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3}),this.productDialog=!1},registrarRIngreso(){if(this.submitted=!0,this.RIcarrera==null||this.RIcuatrimestre==null||this.RIgeneracion==null||this.RIbajas==null||this.RIperiodo==null)return this.$toast.add({severity:"error",summary:"Error",detail:"Todos los campos son obligatorios",life:3e3}),!1;{const i={carrera:this.RIcarrera,cuatrimestre:this.RIcuatrimestre,generacion:this.RIgeneracion,bajas:this.RIbajas,periodo:this.RIperiodo};this.$inertia.post("/registrar-RIngresos",i,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.productDialog=!1,this.$toast.add({severity:"success",summary:"Exito",detail:"Registro exitoso",life:3e3})}})}},editarRIngreso(){if(this.submitted=!0,this.product.id==null||this.product.carrera==null||this.product.cuatrimestre==null||this.product.generacion==null||this.product.tipo_baja==null||this.product.periodo==null)return this.$toast.add({severity:"error",summary:"Error",detail:"Todos los campos son obligatorios",life:3e3}),!1;{const i={id:this.product.id,carrera:this.product.carrera,cuatrimestre:this.product.cuatrimestre,generacion:this.product.generacion,bajas:this.product.tipo_baja,periodo:this.product.periodo};this.$inertia.post(`/editar-RIngresos/${this.product.id}`,i,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.editDialog=!1,this.$toast.add({severity:"success",summary:"Exito",detail:"Editado exitosamente",life:3e3})}})}},eliminarRIngresos(){const i={id:this.product.id};this.$inertia.post(`/eliminar-RIngreso/${this.product.id}`,i,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.deleteProductDialog=!1,this.$toast.add({severity:"success",summary:"Exito",detail:"Eliminado exitosamente",life:3e3})}})},deleteSelectedProducts(){const i={id:this.selectedProducts.map(e=>e.id)};this.$inertia.post(`/eliminar-RIngresos/${this.product.id}`,i,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.deleteProductsDialog=!1,this.selectedProducts=[],this.$toast.add({severity:"success",summary:"Exito",detail:"Eliminado exitosamente",life:3e3})}})}},data(){return{filters:{carrera:{value:null,matchMode:h.IN},Proceso:{value:null,matchMode:h.IN},fecha:{value:null,matchMode:h.IN}},carrerasLista:[{name:"Manufactura",code:"Manufactura"},{name:"Mecatronica",code:"Mecatronica"},{name:"Negocios",code:"Negocios"},{name:"Procesos",code:"Procesos"},{name:"Pymes",code:"Pymes"},{name:"Sistemas",code:"Sistemas"},{name:"Telematica",code:"Telematica"}],sexoLista:[{name:"Masculino",code:"Masculino"},{name:"Femenino",code:"Femenino"}],periodosLista:[{name:"SEP-DIC",code:"SEP-DIC"}],procesosLista:[{name:"1er Proceso",code:"1er Proceso"},{name:"2do Proceso",code:"2do Proceso"},{name:"3er Proceso",code:"3er Proceso"}],cuatrimestresLista:[{name:1,code:1},{name:2,code:2},{name:3,code:3},{name:4,code:4},{name:5,code:5},{name:6,code:6},{name:7,code:7},{name:8,code:8},{name:9,code:9},{name:10,code:10}],listaBajas:[{name:"BT",code:"BT"},{name:"BV",code:"BV"},{name:"BAC",code:"BAC"},{name:"BAD",code:"BAD"}],noDataMessage:"No se encontraron datos",displayResponsive:!1,productDialog:!1,RIcarrera:null,RIcuatrimestre:null,RIgeneracion:null,RIbajas:null,RIperiodo:null,editDialog:!1,deleteProductDialog:!1,selectedProducts:null,deleteProductsDialog:!1}}},O={class:"bg-white",id:"tablaIngreso"},Q={class:"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8 p-[20px]"},W={class:"text-center mb-5"},X={class:"flex gap-5 justify-center flex-wrap"},Z={class:"w-full",id:"contenedorGrafica"},$=r("div",{class:"flex justify-center align-middle text-xl"},[r("h2",null,"No se encontraron datos")],-1),ee={class:"field"},oe={class:"field col-12 md:col-3 !mt-3"},te=r("label",{for:"minmax"},"Generacion",-1),se=r("span",null," Registrar ",-1),re=r("span",null,[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-6 w-6"},[r("path",{"fill-rule":"evenodd",d:"M16.72 7.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 010 1.06l-3.75 3.75a.75.75 0 11-1.06-1.06l2.47-2.47H3a.75.75 0 010-1.5h16.19l-2.47-2.47a.75.75 0 010-1.06z","clip-rule":"evenodd"})])],-1),ie=r("div",{class:"confirmation-content flex items-center justify-center"},[r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),r("span",null," ¿Confirma eliminar los registros seleccionados? ")],-1),le={class:"p-fluid p-formgrid p-grid"},ae={class:"p-field p-col-12 p-md-12"},ne=r("label",{for:"carrera"},"Carrera",-1),de={class:"p-field p-col-12 p-md-12"},ce=r("label",{for:"carrera"},"Cuatrimestre",-1),ue={class:"p-field p-col-12 p-md-12"},pe=r("label",{for:"carrera"},"Generacion",-1),me={class:"p-field p-col-12 p-md-12"},fe=r("label",{for:"carrera"},"Tipo de Baja",-1),ge={class:"p-field p-col-12 p-md-12"},be=r("label",{for:"carrera"},"Periodo",-1),he={class:"confirmation-content flex justify-center items-center"},ve=r("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ye={key:0};function Ie(i,e,m,f,s,l){const a=d("Button"),C=d("Toolbar"),V=d("Toast"),P=d("GraficaIngreso"),p=d("Dialog"),b=d("MultiSelect"),c=d("Column"),x=d("DataTable"),g=d("Dropdown"),D=d("InputNumber"),u=d("InputText");return y(),v(z,null,[t(C,{class:"mb-4"},{start:n(()=>[t(a,{label:"Nuevo Registro",icon:"pi pi-plus",class:"p-button-success !mr-2",onClick:l.openNew},null,8,["onClick"]),t(a,{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:l.confirmDeleteSelected,disabled:!s.selectedProducts||!s.selectedProducts.length},null,8,["onClick","disabled"])]),_:1}),r("section",O,[r("div",Q,[r("div",W,[r("div",X,[r("div",null,[t(V)]),t(a,{label:"Grafica",icon:"pi pi-chart-bar",onClick:l.openResponsive},null,8,["onClick"]),t(p,{header:"Grafica",visible:s.displayResponsive,"onUpdate:visible":e[0]||(e[0]=o=>s.displayResponsive=o),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"70vw"}},{footer:n(()=>[t(a,{label:"Cerrar",icon:"pi pi-check",onClick:l.closeResponsive,autofocus:""},null,8,["onClick"]),t(a,{label:"Guardar",icon:"pi pi-save",onClick:l.saveImage},null,8,["onClick"])]),default:n(()=>[r("div",Z,[t(P,{ingresos:m.reingresos},null,8,["ingresos"])])]),_:1},8,["visible"]),t(a,{icon:"pi pi-external-link",label:"Exportar Excel",onClick:e[1]||(e[1]=o=>l.exportCSV(o))}),t(b,{modelValue:s.filters.carrera.value,"onUpdate:modelValue":e[2]||(e[2]=o=>s.filters.carrera.value=o),options:l.filtrarCarreras(),placeholder:"Carrera",display:"chip"},null,8,["modelValue","options"]),t(b,{modelValue:s.filters.Proceso.value,"onUpdate:modelValue":e[3]||(e[3]=o=>s.filters.Proceso.value=o),options:l.filtrarProcesos(),placeholder:"Proceso",display:"chip"},null,8,["modelValue","options"]),t(b,{modelValue:s.filters.fecha.value,"onUpdate:modelValue":e[4]||(e[4]=o=>s.filters.fecha.value=o),options:l.filtrarFecha(),placeholder:"Fecha",display:"chip"},null,8,["modelValue","options"]),t(a,{icon:"pi pi-times",label:"Limpiar",onClick:e[5]||(e[5]=o=>l.limpiarFiltros())})])]),t(x,{value:m.reingresos,paginator:!0,class:"p-datatable-customers",rows:7,ref:"dt",filters:s.filters,"onUpdate:filters":e[6]||(e[6]=o=>s.filters=o),selection:s.selectedProducts,"onUpdate:selection":e[7]||(e[7]=o=>s.selectedProducts=o),emptyMessage:s.noDataMessage,stripedRows:"",sortMode:"multiple",removableSort:""},{empty:n(()=>[$]),default:n(()=>[t(c,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),t(c,{field:"id",header:"ID",sortable:!0,hidden:""}),t(c,{field:"carrera",header:"Carrera",sortable:!0}),t(c,{field:"cuatrimestre",header:"Cuatrimestre",sortable:!0}),t(c,{field:"generacion",header:"Generacion",sortable:!0}),t(c,{field:"tipo_baja",header:"Tipo de baja",sortable:!0}),t(c,{field:"periodo",header:"Periodo",sortable:!0}),t(c,{exportable:!1,style:{"min-width":"8rem"},class:"p-6"},{body:n(o=>[t(a,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success !mr-2",onClick:w=>l.editProduct(o.data)},null,8,["onClick"]),t(a,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:w=>l.confirmDeleteProduct(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","emptyMessage"]),t(p,{visible:s.productDialog,"onUpdate:visible":e[14]||(e[14]=o=>s.productDialog=o),style:{width:"450px"},header:"Nuevo Registro",modal:!0,class:"p-fluid"},{default:n(()=>[r("div",ee,[r("form",{onSubmit:e[13]||(e[13]=I((...o)=>l.registrarRIngreso&&l.registrarRIngreso(...o),["prevent"]))},[t(g,{modelValue:s.RIcarrera,"onUpdate:modelValue":e[8]||(e[8]=o=>s.RIcarrera=o),options:s.carrerasLista,optionLabel:"name",optionValue:"code",filter:!0,placeholder:"Carrera...",class:"!mt-3"},null,8,["modelValue","options"]),t(g,{modelValue:s.RIcuatrimestre,"onUpdate:modelValue":e[9]||(e[9]=o=>s.RIcuatrimestre=o),options:s.cuatrimestresLista,optionLabel:"name",optionValue:"code",placeholder:"Cuatrimestre...",class:"!mt-3"},null,8,["modelValue","options"]),r("div",oe,[te,t(D,{inputId:"minmax",modelValue:s.RIgeneracion,"onUpdate:modelValue":e[10]||(e[10]=o=>s.RIgeneracion=o),mode:"decimal",min:0,max:1e4,showButtons:!0},null,8,["modelValue"])]),t(g,{modelValue:s.RIbajas,"onUpdate:modelValue":e[11]||(e[11]=o=>s.RIbajas=o),options:s.listaBajas,optionLabel:"name",optionValue:"code",placeholder:"Tipo de baja...",class:"!mt-3"},null,8,["modelValue","options"]),t(g,{modelValue:s.RIperiodo,"onUpdate:modelValue":e[12]||(e[12]=o=>s.RIperiodo=o),options:s.periodosLista,optionLabel:"name",optionValue:"code",placeholder:"Periodo...",class:"!mt-3"},null,8,["modelValue","options"]),t(a,{type:"submit",id:"btnRegisrar",class:"flex items-center justify-center space-x-2 rounded-md border-2 border-blue-500 px-4 py-2 font-medium text-blue-600 transition hover:bg-blue-500 hover:text-white"},{default:n(()=>[se,re]),_:1})],32)])]),_:1},8,["visible"]),t(p,{visible:s.deleteProductsDialog,"onUpdate:visible":e[16]||(e[16]=o=>s.deleteProductsDialog=o),style:{width:"550px"},header:"Confirm",modal:!0},{footer:n(()=>[t(a,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[15]||(e[15]=o=>s.deleteProductsDialog=!1)}),t(a,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:l.deleteSelectedProducts},null,8,["onClick"])]),default:n(()=>[ie]),_:1},8,["visible"]),t(p,{header:"Editar Re Ingreso",visible:s.editDialog,"onUpdate:visible":e[24]||(e[24]=o=>s.editDialog=o),breakpoints:{"960px":"75vw","75vw":"85vw"},style:{width:"25vw"},modal:!0,closable:!0,dismissableMask:!1},{default:n(()=>[r("div",le,[r("form",{onSubmit:e[23]||(e[23]=I((...o)=>l.editarRIngreso&&l.editarRIngreso(...o),["prevent"]))},[t(u,{id:"id",modelValue:i.product.id,"onUpdate:modelValue":e[17]||(e[17]=o=>i.product.id=o)},null,8,["modelValue"]),r("div",ae,[ne,t(u,{id:"carrera",modelValue:i.product.carrera,"onUpdate:modelValue":e[18]||(e[18]=o=>i.product.carrera=o)},null,8,["modelValue"])]),r("div",de,[ce,t(u,{id:"cuatrimestre",modelValue:i.product.cuatrimestre,"onUpdate:modelValue":e[19]||(e[19]=o=>i.product.cuatrimestre=o)},null,8,["modelValue"])]),r("div",ue,[pe,t(u,{id:"generacion",modelValue:i.product.generacion,"onUpdate:modelValue":e[20]||(e[20]=o=>i.product.generacion=o)},null,8,["modelValue"])]),r("div",me,[fe,t(u,{id:"tipo_baja",modelValue:i.product.tipo_baja,"onUpdate:modelValue":e[21]||(e[21]=o=>i.product.tipo_baja=o)},null,8,["modelValue"])]),r("div",ge,[be,t(u,{id:"periodo",modelValue:i.product.periodo,"onUpdate:modelValue":e[22]||(e[22]=o=>i.product.periodo=o)},null,8,["modelValue"])]),t(a,{type:"submit",label:"Guardar",icon:"pi pi-check",class:"!mt-3"})],32)])]),_:1},8,["visible"]),t(p,{visible:s.deleteProductDialog,"onUpdate:visible":e[26]||(e[26]=o=>s.deleteProductDialog=o),style:{width:"450px"},header:"Confirmar",modal:!0},{footer:n(()=>[t(a,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[25]||(e[25]=o=>s.deleteProductDialog=!1)}),t(a,{label:"Si",icon:"pi pi-check",class:"p-button-text",onClick:l.eliminarRIngresos},null,8,["onClick"])]),default:n(()=>[r("div",he,[ve,i.product?(y(),v("span",ye,[R("¿Confirma eliminar el registro "),r("b",null,Y(i.product.carrera),1),R("?")])):q("",!0)])]),_:1},8,["visible"])])])],64)}const ke=J(K,[["render",Ie]]);export{ke as default};
